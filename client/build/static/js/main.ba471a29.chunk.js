(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{121:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},139:function(e,t,a){e.exports=a.p+"static/media/6.c3aa4026.jpg"},140:function(e,t,a){e.exports=a.p+"static/media/8.1bb0cfda.jpg"},141:function(e,t,a){e.exports=a.p+"static/media/11.831d07c5.jpg"},142:function(e,t,a){e.exports=a.p+"static/media/9.6e3c6b1a.jpg"},151:function(e,t,a){e.exports=a(375)},156:function(e,t,a){},157:function(e,t,a){},209:function(e,t){},212:function(e,t){},215:function(e,t){},216:function(e,t){},258:function(e,t){},259:function(e,t){},260:function(e,t,a){},368:function(e,t,a){},369:function(e,t,a){},370:function(e,t,a){},371:function(e,t,a){},372:function(e,t,a){},373:function(e,t,a){},374:function(e,t,a){e.exports=a.p+"static/media/3.410639a7.jpg"},375:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),l=a(137),o=a.n(l),r=(a(156),a(9)),s=a(3),i=(a(157),a(1));var m=function(e){var t=e.path,a=e.menuLabel;return c.a.createElement("li",{className:"nav-item active"},c.a.createElement(r.b,{to:t,className:window.location.pathname==={path:t}?"nav-link active":"nav-link"},a))};a(78);var u=function(){var e=Object(n.useRef)(),t=Object(n.useState)(!1),a=Object(i.a)(t,2),l=a[0],o=a[1],r=Object(n.useState)(""),m=Object(i.a)(r,2),u=m[0],d=m[1];return Object(n.useEffect)(function(){console.log("Welcome")}),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"searchbox d-flex justify-content-center"},c.a.createElement("form",{className:"form-inline"},c.a.createElement("div",{className:"input-group mx-4 "},c.a.createElement("input",{className:"form-control navBarSearch my-lg-0",ref:e,type:"search",placeholder:"Seach for any category","aria-label":"Search"}),c.a.createElement("div",{className:"input-group-append"},c.a.createElement("span",{className:"input-group-text"},c.a.createElement("i",{className:"fas fa-search",onClick:function(t){t.preventDefault(),console.log("clicked"),console.log("status "+e.current.value),console.log("search on value "+l),d(e.current.value.toLowerCase()),o(!0)}})))))),l&&c.a.createElement(s.a,{to:{pathname:"/search",state:{searchVal:u}}}))},d=a(2),p=a.n(d),g={saveUser:function(e){return p.a.post("/api/users/signup",e)},checkUser:function(e){return p.a.post("/api/users/login",e)},getUser:function(){return p.a.get("/api/users/personalAccount")},saveImageDetails:function(e){return console.log("image details are "+e),p.a.post("api/images/saveImage",e)},updateUserDetais:function(e){return p.a.patch("/api/users/personalAccount",e)},getImageDetails:function(e){return console.log("contest id is "+e),p.a.get("api/images/getImages/"+e)},getPersonalImages:function(){return p.a.get("/api/images/personalAccount")},logoutUser:function(){return p.a.get("/api/users/logout")},createContestDetails:function(e){return p.a.post("/api/contests/hostevents",e)},getOpenContests:function(){return p.a.get("/api/contests/openContests")},getClosedContests:function(){return p.a.get("/api/contests/closedContests")},checkUserParticipation:function(e,t){return p.a.get("/api/images/checkUserParticipation/"+e+"/"+t)},getContestByEmail:function(){return p.a.get("/api/contests/personalAccount")},getRating:function(e,t,a){return p.a.get("/api/images/getImageRating/"+e+"/"+t+"/"+a)},updateRating:function(e){return console.log(e),p.a.put("/api/images/updateRating",e)},getContestByID:function(e){return p.a.get("/api/contests/personalAccount/"+e)},updateContestDetails:function(e,t){return p.a.patch("/api/contests/personalAccount/"+e,t)},getAverageRating:function(e){return p.a.get("api/images/calcAverageRating/"+e)},updateAverageRating:function(e){return p.a.put("/api/images/setAvgRating",e)},searchContests:function(e){return p.a.get("/api/contests/searchforAcategory/"+e)}},f=(a(178),a(34)),E=a(200);var b=function(){var e=Object(s.f)(),t=Object(n.useState)(window.location.pathname),a=Object(i.a)(t,2),l=a[0],o=a[1],r=E.connect("cbam34cnp437","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJ1c2VyX2lkIjoidXBpYyJ9.k1P-ctjAM1fjTxQQATPIpwUGlEIUipaTfh_U_59goyc","80330").feed("notification","upic");Object(n.useEffect)(function(){return e.listen(function(e){o(e.pathname),console.log(l)})},[e]),Object(n.useEffect)(function(){r.subscribe(function(e){var t=JSON.parse(e.new[0].object);f.NotificationManager.success(t.title,t.message,5e3,function(){window.location.replace(t.redirecturl)})})},[]);var d=function(){r.get().then(function(e){e.results[0].activities.slice(0,5).forEach(function(e){var t=JSON.parse(e.object);f.NotificationManager.success(t.title,t.message,5e3,function(){window.location.replace(t.redirecturl)})})})},p=function(){g.logoutUser().then(function(e){return console.log("Successfully logged out")}),(void 0).cancel()};return c.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},c.a.createElement("div",{className:"container"},c.a.createElement("a",{className:"navbar-brand mb-0",href:"/"},"uPic"),c.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarTogglerDemo02","aria-controls":"navbarTogglerDemo02","aria-expanded":"false","aria-label":"Toggle navigation"},c.a.createElement("span",{className:"navbar-toggler-icon"})),c.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarTogglerDemo02"},function(){switch(l){case"/":case"/about":case"/login":case"/signup":return c.a.createElement("ul",{className:"navbar-nav ml-auto mt-2 mt-lg-0 ml-auto"},c.a.createElement(m,{path:"/about",menuLabel:"About"}),c.a.createElement(m,{path:"/signup",menuLabel:"SignUp"}),c.a.createElement(m,{path:"/login",menuLabel:"LogIn"}));case"/profile":case"/personalAccount":case"/hostevents":case"/search":return c.a.createElement("ul",{className:"nav headerNav nav-pills nav-justified profileNav ml-auto"},c.a.createElement(m,{path:"/personalAccount",menuLabel:"Account",className:"nav-item"}),c.a.createElement(m,{path:"/hostevents",menuLabel:"HostEvent",className:"nav-item"}),c.a.createElement(m,{path:"/contests",menuLabel:"Contests",className:"nav-item"}),c.a.createElement(u,null),c.a.createElement("li",{onClick:d,className:"nav-item active"},c.a.createElement("h5",null,c.a.createElement("i",{className:"fas fa-bell mt-4",style:{color:"white"}}))),c.a.createElement(m,{path:"/",menuLabel:"Logout",className:"nav-item",onClick:p}),c.a.createElement(f.NotificationContainer,null));case"/contests":return c.a.createElement("ul",{className:"nav headerNav nav-pills nav-justified profileNav ml-auto"},c.a.createElement(m,{path:"/personalAccount",menuLabel:"Account",className:"nav-item"}),c.a.createElement(m,{path:"/hostevents",menuLabel:"HostEvent",className:"nav-item"}),c.a.createElement(u,null),c.a.createElement(f.NotificationContainer,null),c.a.createElement("li",{onClick:d,className:"nav-item active"},c.a.createElement("h5",null,c.a.createElement("i",{class:"fas fa-bell mt-4",style:{color:"white"}}))),c.a.createElement(m,{path:"/",menuLabel:"Logout",className:"nav-item",onClick:p}))}}())))};a(121);var v=function(e){var t=e.title,a=e.displaySize;return c.a.createElement("h2",{className:"display-".concat(a," title")},t)},h=a(139),N=a.n(h);var j=function(){var e=Object(n.useState)({signedin:!1,user:""}),t=Object(i.a)(e,2),a=t[0],l=t[1],o=Object(n.useRef)(),r=Object(n.useRef)(),m=Object(n.useRef)(),u=Object(n.useRef)(),d={backgroundImage:"url("+N.a+")"};return c.a.createElement("div",{className:"bgCover",style:d},a.signedin?c.a.createElement(s.a,{to:{pathname:"/profile",state:{email:"".concat(a.user)}}}):c.a.createElement("div",{className:"container p-5 signUpDiv"},c.a.createElement("div",{className:"jumbotron mt-5 p-5 w-50 mx-auto justify-content-center"},c.a.createElement(v,{title:"Sign up for uPic",displaySize:"5"}),c.a.createElement("form",{className:"p-5 mx-auto"},c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{type:"text",className:"form-control mb-1",placeholder:"User Name",ref:o}),c.a.createElement("input",{type:"email",className:"form-control mb-1",placeholder:"Email",ref:r}),c.a.createElement("input",{type:"password",className:"form-control mb-1",placeholder:"Password",ref:m}),c.a.createElement("input",{type:"password",className:"form-control mb-1",placeholder:"Confirm Password",ref:u})),c.a.createElement("button",{type:"submit",className:"btn btn-secondary btn-block",onClick:function(e){e.preventDefault(),g.saveUser({name:o.current.value,email:r.current.value,password:m.current.value,password2:u.current.value}).then(function(e){console.log(e.data),localStorage.setItem("email",e.data.email),l({signedin:!0,user:e.data.email})})}},"Submit")),c.a.createElement("hr",null),c.a.createElement("h6",null,"Already a uPic member? ",c.a.createElement("a",{href:"/login"},"Log in here")))))},y=a(47),O=a.n(y),w=a(140),C=a.n(w),D=a(141),S=a.n(D),I=a(142),x=a.n(I);var k=function(){var e=Object(n.useState)(!0),t=Object(i.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(!1),r=Object(i.a)(o,2),s=r[0],m=r[1],u=[O.a,C.a,S.a,x.a],d={backgroundImage:"url("+u[2]+")"};return Object(n.useEffect)(function(){},[]),c.a.createElement("div",{className:"mainBg",style:d},a&&c.a.createElement("div",{className:"container homepageDiv mx-auto",style:{color:"rgb(233,236,239)",height:"100vh"}},c.a.createElement(v,{title:"Get Inspired. Get Involved.",displaySize:"4"}),c.a.createElement(v,{title:"Join uPic Community to start a new Photo Contest.",displaySize:"7"}),c.a.createElement("br",null),c.a.createElement("p",{className:" row lead"},c.a.createElement("button",{className:"btn btn-secondary btn-lg homePageButton",onClick:function(){l(!1),m(!0)}},"Join"))),s&&c.a.createElement(j,null))};var U=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a=t[0],l=t[1],o=Object(n.useRef)(),r=Object(n.useRef)(),m={backgroundImage:"url("+O.a+")"};return c.a.createElement("div",{className:"bgCover",style:m},!a&&c.a.createElement("div",{className:"container p-5 loginDiv"},c.a.createElement("div",{className:"jumbotron mt-5 p-5 w-50 mx-auto justify-content-center"},c.a.createElement(v,{title:"Log in to uPic",displaySize:"5"}),c.a.createElement("form",{className:"p-5 mx-auto"},c.a.createElement("div",{className:"form-group"},c.a.createElement("input",{type:"email",className:"form-control mb-1",placeholder:"Email address",ref:o}),c.a.createElement("input",{type:"password",className:"form-control mb-1",placeholder:"Password",ref:r})),c.a.createElement("button",{type:"submit",className:"btn btn-secondary btn-block",onClick:function(e){e.preventDefault(),g.checkUser({email:o.current.value,password:r.current.value}).then(function(e){console.log(e.data.email),localStorage.setItem("email",e.data.email),l(!0)})}},"Login")),c.a.createElement("hr",null),c.a.createElement("h6",null,"Not a uPic member? ",c.a.createElement("a",{href:"/signup"},"Sign up here")))),a&&c.a.createElement(s.a,{to:{pathname:"/profile",state:{email:"".concat(a.user)}}}))},F=(a(260),a(75)),T=a.n(F);var L=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],l=t[1],o=new T.a({accessKey:"5DMWN47D_QB7GWHov8gtgQqXcz_-lnkLF4NC7hYPjFM"}),r=["nature","pets","wildlife","food","family","world","water","sports","random"],s=Math.floor(Math.random()*r.length)+1;return Object(n.useEffect)(function(){o.search.photos(r[s],1,8,{orientation:"portrait"}).then(F.toJson).then(function(e){console.log(e.results),l(e.results)})},[]),c.a.createElement("div",{className:"container jumbotron mt-2"},c.a.createElement("div",{className:"row"},a.map(function(e,t){return c.a.createElement("div",{className:"col-lg-3 col-md-4 col-sm-6 border",key:t},c.a.createElement("a",{href:e.urls.regular,className:"thumbnail"},c.a.createElement("img",{src:e.urls.thumb})))})))},A=a(143),P=a(144),R=a(149),_=a(145),B=a(150),H=a(49),M=a.n(H),W=function(e){function t(e){var a;return Object(A.a)(this,t),(a=Object(R.a)(this,Object(_.a)(t).call(this,e))).singleFileChangedHandler=function(e){a.setState({selectedFile:e.target.files[0]})},a.singleFileUploadHandler=function(e){a.props.relaodTheComponet();var t=new FormData;console.log("--- contest id ---"+a.props.contestid),a.state.selectedFile?(t.append("contestImage",a.state.selectedFile,a.state.selectedFile.name),console.log("data being sent "+t),p.a.post("/api/images/img-upload",t,{headers:{accept:"application/json","Accept-Language":"en-US,en;q=0.8","Content-Type":"multipart/form-data; boundary=".concat(t._boundary)}}).then(function(e){if(console.log(e.status),console.log(e.data),200===e.status)if(e.data.error)"LIMIT_FILE_SIZE"===e.data.error.code?a.ocShowAlert("Max size: 2MB","red"):(console.log(e.data),a.ocShowAlert(e.data.error,"red"));else{console.log("else block "+e.status),a.setState({uploaded:!0}),a.props.hideUploadButton(),a.ocShowAlert("File Uploaded","#008000");var t={owner:localStorage.getItem("email"),contestId:a.props.contestid,imageUrl:e.data.imageUrl,thumbnailUrl:e.data.thumbnailUrl};console.log(t),g.saveImageDetails(t).then(function(e){console.log(e),a.props.relaodTheComponet()}).catch(function(e){return console.log(e)})}}).catch(function(e){a.ocShowAlert(e,"red")})):a.ocShowAlert("Please upload file","red")},a.ocShowAlert=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#3089cf",a=document.querySelector("#oc-alert-container"),n=document.createElement("div"),c=document.createTextNode(e);n.setAttribute("class","oc-alert-pop-up"),M()(n).css("background",t),n.appendChild(c),a.appendChild(n),setTimeout(function(){M()(n).fadeOut("slow"),M()(n).remove()},3e3)},a.state={selectedFile:null,selectedFiles:null,uploaded:!1},a}return Object(B.a)(t,e),Object(P.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"container w-50"},c.a.createElement("div",{id:"oc-alert-container",className:"p-2"}),!this.state.uploaded&&c.a.createElement("div",{className:"card border-light mb-3 mt-5",style:{boxShadow:"0 5px 10px 2px rgba(195,192,192,.5)"}},c.a.createElement("div",{className:"card-header"},c.a.createElement("h4",{style:{color:"#555",marginLeft:"12px"}},"Upload a Wonderful Pic !!"),c.a.createElement("p",{className:"text-muted",style:{marginLeft:"12px"}},"Upload Size: 250px x 250px ( Max 2MB )")),c.a.createElement("div",{className:"card-body"},c.a.createElement("input",{type:"file",onChange:this.singleFileChangedHandler,className:"text-center"}),c.a.createElement("div",{className:"mt-5"},c.a.createElement("button",{className:"btn btn-info",onClick:this.singleFileUploadHandler},"Upload!")))),this.state.uploaded&&c.a.createElement("h4",null,"Thanks for the participation!!"))}}]),t}(n.Component);var V=function(e){var t=e.contestData,a=e.showUpload;return c.a.createElement("div",null,c.a.createElement("h3",null,t.title),c.a.createElement("p",{className:"font-italic"},t.description),c.a.createElement("p",null,"Host: ",t.owner),c.a.createElement("p",null,"Due on: ",t.duedate),!a&&c.a.createElement("p",null,"Wanna Participate !!?"))};var J=function(e){var t=e.classNames,a=e.onClickHandler,n=e.label;return c.a.createElement("button",{className:t,onClick:a},n)},z=a(48),G=a.n(z),Q={fitWidth:!0,colomnWidth:200,gutter:5};var X=function(e){var t=e.imageUrl,a=e.thumbnailUrl;return c.a.createElement(r.b,{to:{pathname:"/image",state:{imageUrl:t}}}," ",c.a.createElement("img",{src:a,style:{width:320},alt:"Contest images"})," ")};a(368);var q=function(e){var t=e.id,a=e.starValue,n=e.starInnerText,l=e.rating,o=e.contestId,r=e.ratingUpdateHandler;console.log("rating = ".concat(l," stravalue = ").concat(a));var s=l>=a;return console.log("starred value "+s),c.a.createElement(c.a.Fragment,null,c.a.createElement("input",{className:"visuallyhidden",type:"radio",name:"rating",id:t,value:a}),c.a.createElement("label",{htmlFor:t,onClick:function(e){console.log("--id --"+t),console.log(a);var n={image_id:t,contest_id:o,user:localStorage.getItem("email"),rating:a};g.updateRating(n).then(function(e){console.log(e.data.rating),r(e.data.rating)}).catch(function(e){return console.log(e)})}},c.a.createElement("span",{className:"visuallyhidden"},n),c.a.createElement("i",{className:s?"fa-star fas":"fa-star far",style:{color:"\t#D4AF37"}})))};var Y=function(e){var t=e.img,a=e.i,l=e.contestId,o=Object(n.useState)(0),r=Object(i.a)(o,2),s=r[0],m=r[1],u=Object(n.useState)(0),d=Object(i.a)(u,2),p=d[0],f=d[1],E=function(e){console.log("Updated Rating "+e),f(e)};Object(n.useEffect)(function(){g.getRating(t._id,l,localStorage.getItem("email")).then(function(e){console.log(e.data[0].rating);var t=e.data[0].rating;t>0&&m(t)}).catch(function(e){return console.log(e)})},[p]),console.log(t),console.log("image sent "+t._id),console.log("i "+a);var b="One Star",v="Two Stars",h="Three Stars",N="Four Stars",j="Five Stars";return c.a.createElement("form",{action:"post"},c.a.createElement(q,{id:t._id,starValue:"1",starInnerText:b,rating:s,contestId:l,ratingUpdateHandler:E}),c.a.createElement(q,{id:t._id,starValue:"2",starInnerText:v,rating:s,contestId:l,ratingUpdateHandler:E}),c.a.createElement(q,{id:t._id,starValue:"3",starInnerText:h,rating:s,contestId:l,ratingUpdateHandler:E}),c.a.createElement(q,{id:t._id,starValue:"4",starInnerText:N,rating:s,contestId:l,ratingUpdateHandler:E}),c.a.createElement(q,{id:t._id,starValue:"5",starInnerText:j,rating:s,contestId:l,ratingUpdateHandler:E}))};var $=function(e){var t=e.images,a=e.contestId,l=e.showRating,o=Object(n.useState)(!1),r=Object(i.a)(o,2),s=r[0],m=r[1];return Object(n.useEffect)(function(){l&&m(!0)},[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(G.a,{className:"grid",elementType:"div",options:Q,disableImagesLoaded:!1,updateOnEachImageLoad:!1},t.map(function(e,t){return c.a.createElement("div",{className:"pb-0",style:{backgroundColor:"rgb(108,117,125)"},key:t},c.a.createElement(X,{imageUrl:e.imageUrl,thumbnailUrl:e.thumbnailUrl}),s&&c.a.createElement(Y,{img:e,i:t,contestId:a}))})))};var K=function(e){var t=e.backToContest,a=e.contestData,l=Object(n.useState)(!1),o=Object(i.a)(l,2),r=o[0],s=o[1],m=Object(n.useState)([]),u=Object(i.a)(m,2),d=u[0],p=u[1],f=Object(n.useState)(!1),E=Object(i.a)(f,2),b=E[0],h=E[1],N=Object(n.useState)(!1),j=Object(i.a)(N,2),y=j[0],O=j[1],w=Object(n.useState)(!1),C=Object(i.a)(w,2),D=C[0],S=C[1];return Object(n.useEffect)(function(){g.getImageDetails(a._id).then(function(e){console.log(e.data),p(e.data)}).catch(function(e){return console.log(e)})},[b]),c.a.createElement("div",{className:"jumbotron border m-1"},c.a.createElement(V,{contestData:a,showUpload:r}),c.a.createElement($,{images:d,contestId:a._id,showRating:!0}),r&&!D&&c.a.createElement(W,{contestid:a._id,relaodTheComponet:function(){h(!b)},hideUploadButton:function(){O(!0)}}),!y&&!D&&c.a.createElement("div",{className:"d-flex justify-content-center"},c.a.createElement(J,{classNames:"mx-auto border btn btn-primary",onClickHandler:function(){g.checkUserParticipation(localStorage.getItem("email"),a._id).then(function(e){console.log(e.data.length),e.data.length>0?(console.log("Particpated"),S(!0)):(console.log("Not Participated "),S(!1))}).catch(function(e){return console.log(e)}),s(!r)},label:"Upload a Pic"})),D&&c.a.createElement(v,{title:"You have already uploaded a wonderul picture !!",displaySize:"5"}),c.a.createElement("br",null),c.a.createElement(J,{classNames:"mt-1 btn btn-primary",onClickHandler:t,label:"Contests"}))};a(369);var Z=function(e){var t=e.backToContest,a=e.contestData,l=Object(n.useState)([]),o=Object(i.a)(l,2),r=o[0],s=o[1];return console.log("Contest Details "+a.title),Object(n.useEffect)(function(){g.getImageDetails(a._id).then(function(e){console.log(e.data),s(e.data)}).catch(function(e){return console.log(e)})},[]),c.a.createElement("div",null,c.a.createElement("h1",null,a.title),c.a.createElement($,{images:r,contestId:a._id,showRating:!1}),c.a.createElement(J,{classNames:"mt-1 btn btn-primary",onClickHandler:t,label:"Contests"}))};var ee=function(e){var t=e.contest,a=e.contestDetails,n=e.buttonLabel;return c.a.createElement("div",{className:"card h-100 border-secondary",style:{maxWidth:"18rem"}},c.a.createElement("div",{className:"card-body"},c.a.createElement("h5",{className:"card-title"},t.title),c.a.createElement("p",{className:"card-text "},t.description)),c.a.createElement("div",{className:"card-footer"},c.a.createElement("a",{href:"/about",className:"btn btn-secondary",onClick:function(e){e.preventDefault(),a(t)}},n)))};var te=function(e){var t=e.contests,a=e.contestDetails,n=e.buttonLabel;return c.a.createElement("div",{className:"list-overflow-container"},c.a.createElement("div",{className:"row"},t.map(function(e){return c.a.createElement("div",{className:"col-lg-4 col-md-6 mb-4",key:e._id},c.a.createElement(ee,{contest:e,contestDetails:a,buttonLabel:n}))})))};var ae=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)([]),r=Object(i.a)(o,2),s=r[0],m=r[1],u=Object(n.useState)({}),d=Object(i.a)(u,2),p=d[0],f=d[1],E=Object(n.useState)(!1),b=Object(i.a)(E,2),h=b[0],N=b[1],j=Object(n.useState)(!1),y=Object(i.a)(j,2),O=y[0],w=y[1];Object(n.useEffect)(function(){g.getOpenContests().then(function(e){console.log(e.data),l(e.data)}).catch(function(e){return console.log(e)})},[]),Object(n.useEffect)(function(){g.getClosedContests().then(function(e){console.log(e.data),m(e.data)}).catch(function(e){return console.log(e)})},[]);var C=function(){N(!1),w(!1)};return c.a.createElement("div",{className:"bgCover"},c.a.createElement("div",{className:"container p-5"},!O&&!h&&c.a.createElement("div",{className:"jumbotron mt-5 p-5 mx-auto justify-content-center"},c.a.createElement(v,{title:"Happening Contests",displaySize:"5"}),c.a.createElement("small",null,"Click to upload and rate the pictures !!"),c.a.createElement("br",null),c.a.createElement("br",null),a.length?c.a.createElement(te,{contests:a,contestDetails:function(e){console.log(e),f(e),N(!0)},buttonLabel:"View"}):c.a.createElement("h3",null,"No Results found"),c.a.createElement("br",null),c.a.createElement(v,{title:"Past Contests",displaySize:"5"}),c.a.createElement("small",null,"click to view the winners!!"),c.a.createElement("br",null),c.a.createElement("br",null),s.length?c.a.createElement(te,{contests:s,contestDetails:function(e){w(!0),f(e)},buttonLabel:"Winners"}):c.a.createElement("h3",null,"No Results found")),h&&c.a.createElement(K,{backToContest:C,contestData:p}),O&&c.a.createElement(Z,{backToContest:C,contestData:p})))};a(370);var ne=function(e){console.log(e.userData);var t=e.userData.date;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"row banner"},c.a.createElement("div",{className:"banner-text"},c.a.createElement("h1",{className:"responsive-headline respHeader"}," ",e.userData.name," "),c.a.createElement("p",{className:"text-center joiningText"},"Joined On:  ","".concat(t).substring(0,10)))))};a(135);var ce=function(e){var t=Object(n.useState)(e.Desc),a=Object(i.a)(t,2),l=a[0],o=a[1];return c.a.createElement("div",null,c.a.createElement("form",{className:"form-group infoFormSection"},c.a.createElement("textarea",{className:"form-control",rows:"6",name:"textarea",value:l,onChange:function(e){o(e.target.value)}},e.Desc),c.a.createElement("button",{className:"saveButton",onClick:function(t){t.preventDefault(),g.updateUserDetais({description:l}).then(function(t){e.setDescription(t.data.description)})}},"Save")))};var le=function(e){console.log(e);var t=Object(n.useState)(!1),a=Object(i.a)(t,2),l=a[0],o=a[1],r=Object(n.useState)(e.userInfo.description||"Tell us something about yourself"),s=Object(i.a)(r,2),m=s[0],u=s[1],d=Object(n.useState)([]),p=Object(i.a)(d,2),f=p[0],E=p[1];return Object(n.useEffect)(function(){g.getPersonalImages().then(function(e){console.log(e.data),E(e.data)})},[]),c.a.createElement("section",{className:"maneDiv"},c.a.createElement("br",null),c.a.createElement("div",{className:"personalDetailsDiv col-12"},c.a.createElement("div",{className:"description desc-empty"},!l&&c.a.createElement("i",{className:" descriptionBox empty-description-handler"},m),l&&c.a.createElement(ce,{setDescription:function(e){u(e),o(!1)},Desc:m}),!l&&c.a.createElement("button",{onClick:function(){o(!l)},className:"Fafa-pencil"},c.a.createElement("i",{className:"fa fa-pencil","aria-hidden":"true"}))),c.a.createElement("div",{className:"nameDiv"},c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-2 text-muted"}," Name "),c.a.createElement("div",{className:"col-2 "}," ",e.userInfo.name," "),c.a.createElement("div",{className:"col-6"})),c.a.createElement("br",null),c.a.createElement("div",{className:"row"},c.a.createElement("div",{className:"col-2 text-muted"}," Email "),c.a.createElement("div",{className:"col-2 "}," ",e.userInfo.email," "),c.a.createElement("div",{className:"col-6"}))),c.a.createElement("div",{className:"galleryDiv"},c.a.createElement("h6",{id:"h5Div"},"Gallery"),c.a.createElement("br",null),c.a.createElement(G.a,{className:"grid",elementType:"div",options:Q,disableImagesLoaded:!1,updateOnEachImageLoad:!1},f.map(function(e,t){return c.a.createElement("div",{key:t},c.a.createElement("img",{className:"personalGalleryImg",src:e.thumbnailUrl,alt:"Contest images"}))})))))},oe=a(23),re=(a(371),a(146)),se=a.n(re),ie=a(147);a(136);var me=function(e){console.log(e);var t=Object(n.useState)({title:"",description:"",category:"",status:"",dueDate:""}),a=Object(i.a)(t,2),l=a[0],o=a[1];function r(e){var t=e.target.value;o(Object(ie.a)({},l,Object(oe.a)({},e.target.name,t)))}return Object(n.useEffect)(function(){g.getContestByID(e.id).then(function(e){console.log(e.data),o({title:e.data.title,description:e.data.description,category:e.data.category,status:e.data.status,dueDate:e.data.duedate})})},[]),c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"contestUpdateDetailsDiv"},c.a.createElement("h3",{className:"form-title text-center"},"Update Contest"),c.a.createElement("hr",null),c.a.createElement("br",null),c.a.createElement("form",{className:"UpdateFormDiv"},c.a.createElement("div",{className:"form-group row justify-content-center contestFormInput"},c.a.createElement("label",{htmlFor:"title",className:"col-sm-2 col-form-label updateLabel"},"Title"),c.a.createElement("div",{className:"col-sm-10 "},c.a.createElement("input",{type:"text",name:"title",value:l.title,onChange:r,className:"form-control",placeholder:"Contest Title"}))),c.a.createElement("div",{className:"form-group row contestFormInput"},c.a.createElement("label",{htmlFor:"description",className:"col-sm-2 col-form-label updateLabel"},"Description"),c.a.createElement("div",{className:"col-sm-10 "},c.a.createElement("textarea",Object(oe.a)({className:"form-control",rows:"3",name:"textarea",value:l.description,onChange:r,placeholder:"Tell us something about the contest"},"name","description")))),c.a.createElement("div",{className:"form-group row contestFormInput"},c.a.createElement("label",{htmlFor:"description",className:"col-sm-2 col-form-label updateLabel"},"Category"),c.a.createElement("div",{className:"col-sm-10 "},c.a.createElement("select",{className:"form-control",name:"category",value:l.category,onChange:r},["Portrait","Still Life","Landscape","Food","Wildlife","Macro","Event","Fashion","Newborn","Street","Sports","Documentary","Weather","Architectural"].map(function(e){return c.a.createElement("option",{key:e+"2"},e)})))),c.a.createElement("div",{className:"form-group row contestFormInput"},c.a.createElement("label",{htmlFor:"endDate",className:"col-sm-2 col-form-label updateLabel"},"DueDate"),c.a.createElement("div",{className:"col-sm-10 "},c.a.createElement("input",{type:"date",name:"duedate",onChange:r,className:"form-control",placeholder:"Tell us something about the contest"}))),c.a.createElement("div",{className:"form-group row contestFormInput"},c.a.createElement("label",{htmlFor:"description",className:"col-sm-2 col-form-label updateLabel"},"Status"),c.a.createElement("div",{className:"col-sm-10 "},c.a.createElement("select",{className:"form-control",name:"status",value:l.status,onChange:r},["Open","Closed"].map(function(e){return c.a.createElement("option",{key:e},e)})))),c.a.createElement("div",{className:"row"},c.a.createElement("button",{className:"btn btn-default contestSaveButton",onClick:function(t){t.preventDefault(),g.updateContestDetails(e.id,{title:l.title,description:l.description,category:l.category,duedate:l.dueDate,status:l.status}).then(function(t){console.log("record updated"),console.log(t.data),e.setDescriptionDetails(t.data),"Closed"===t.data.status&&(console.log("CONTEST IS DONE "),g.getAverageRating(t.data._id).then(function(e){console.log(e.data);for(var t=e.data[0].contest_id,a=e.data,n=[],c=[],l=0;l<a.length;l++)n[a[l].image_id]||(c.push(a[l].image_id),n[a[l].image_id]=1);for(var o=[],r=function(e){i=a.filter(function(t){return t.image_id===c[e]}),m=0;for(var t=0;t<i.length;t++)m+=i[t].rating;u=m/i.length,console.log("==== avg rating of "+c[e]+" is "+Math.floor(u)),d=c[e],p=Math.floor(u),(f={})[d]=p,o.push(f)},s=0;s<c.length;s++){var i,m,u,d,p,f;r(s)}var E={contest_id:t,ratingsArr:o,owner:localStorage.getItem("email")};g.updateAverageRating(E).then(function(e){return console.log(e)}).catch(function(e){return console.log(e)})}).catch(function(e){return console.log(e)}))})}},"Update Contest")))))};var ue=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(""),r=Object(i.a)(o,2),s=r[0],m=r[1],u=Object(n.useState)(!1),d=Object(i.a)(u,2),p=d[0],f=d[1];Object(n.useEffect)(function(){g.getContestByEmail().then(function(e){console.log(e.data),l(e.data)})},[]);var E=function(e){f(!0),console.log(e.target.getAttribute("custom-attribute"));var t=e.target.getAttribute("custom-attribute");m(t)};return c.a.createElement("section",{className:"maneDiv"},c.a.createElement("div",null,c.a.createElement("br",null),p?c.a.createElement(me,{id:s,setDescriptionDetails:function(e){f(!1),console.log(e);var t=a.findIndex(function(t){return t.id===e.id});console.log(e),l(se()(a,Object(oe.a)({},t,{$set:e})))}}):c.a.createElement("div",{className:"container tabelDiv mt-5"},c.a.createElement("table",{className:"table  table-hover hostEventTable table-condensed"},c.a.createElement("thead",{className:"thead"},c.a.createElement("tr",null,c.a.createElement("th",{className:"col",style:{width:"15%"}},"Name"),c.a.createElement("th",{className:"col",style:{width:"15%"}}," Date "),c.a.createElement("th",{className:"col",style:{width:"20%"}}," Status "),c.a.createElement("th",{className:"col",style:{width:"5%"}}," Edit "))),c.a.createElement("tbody",null,a.length?a.map(function(e){return c.a.createElement("tr",{key:e.id},c.a.createElement("td",{"data-th":"Name",className:"name-cell align-middle"},e.title," "),c.a.createElement("td",{"data-th":"Email",className:"align-middle"},e.startdate.substring(0,10)),c.a.createElement("td",{"data-th":"Phone",className:"align-middle"},e.status,"  "),c.a.createElement("td",null,"Open"===e.status&&c.a.createElement("button",{"custom-attribute":e.id,onClick:E},c.a.createElement("i",{"custom-attribute":e.id,className:"fa fa-pencil","aria-hidden":"true"}))))}):c.a.createElement("tr",null,c.a.createElement("td",null),c.a.createElement("td",null,"No result to display")))))))};a(372);var de=function(){var e=Object(n.useState)([]),t=Object(i.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)(function(){g.getPersonalImages().then(function(e){console.log(e.data),l(e.data)})},[]),c.a.createElement("section",{className:"maneDiv"},c.a.createElement("br",null),c.a.createElement("div",{className:"participationDiv"},c.a.createElement("div",{className:"container tabelDiv  participationDiv mt-5"},c.a.createElement("table",{className:"table  table-hover participationTable table-condensed"},c.a.createElement("thead",{className:"thead"},c.a.createElement("tr",null,c.a.createElement("th",{className:"col",style:{width:"15%"}},"Name"),c.a.createElement("th",{className:"col",style:{width:"15%"}},"Date"),c.a.createElement("th",{className:"col",style:{width:"20%"}},"Status"),c.a.createElement("th",{className:"col",style:{width:"5%"}}," Picture Uploaded"))),c.a.createElement("tbody",null,a.length?a.map(function(e){return c.a.createElement("tr",{key:e.contestId},c.a.createElement("td",{className:"name-cell align-middle"},e.Contest[0].title," "),c.a.createElement("td",{className:"align-middle"},e.Contest[0].startdate.substring(0,10),"  "),c.a.createElement("td",{className:"align-middle"},e.Contest[0].status,"  "),c.a.createElement("td",{className:"align-middle"},c.a.createElement("a",{href:e.imageUrl,target:"_blank"}," ",c.a.createElement("img",{classname:"participationThumbnail",src:e.thumbnailUrl})," ")))}):c.a.createElement("tr",null,c.a.createElement("td",null),c.a.createElement("td",null,"No result to display")))))))};a(373);var pe=function(e){var t=e.userData,a=Object(n.useState)("personalData"),l=Object(i.a)(a,2),o=l[0],r=l[1],s=function(e){r(e),console.log(o)};return c.a.createElement("div",{className:"headerNavBar"},c.a.createElement("div",{className:"accountNavBarDiv"},c.a.createElement("ul",{className:"nav headerNav nav-pills nav-justified accountNavBar"},c.a.createElement("li",{className:"nav-item headerNavItem",onClick:function(){return s("personalData")}},"PersonalData"),c.a.createElement("li",{className:"nav-item headerNavItem",onClick:function(){return s("eventsHosted")}},"Events-Hosted"),c.a.createElement("li",{className:"nav-item headerNavItem",onClick:function(){return s("participation")}},"Participations"))),c.a.createElement("div",{className:"personalContent"},function(e){switch(e){case"personalData":return c.a.createElement(le,{userInfo:t});case"eventsHosted":return c.a.createElement(ue,null);case"participation":return c.a.createElement(de,null)}}(o)))};var ge=function(){var e=Object(n.useState)({name:"",email:"",user:{}}),t=Object(i.a)(e,2),a=t[0],l=t[1];return Object(n.useEffect)(function(){g.getUser().then(function(e){console.log("getuser data"),console.log(e.data.user.email),l({name:e.data.user.name,email:e.data.user.email,user:e.data.user})}).catch(function(e){return console.log(e)})},[]),c.a.createElement(c.a.Fragment,null,c.a.createElement(ne,{userData:a.user}),c.a.createElement(pe,{userData:a.user}))},fe=a(148),Ee=a.n(fe);a(374);var be=function(){var e=Object(n.useRef)(),t=Object(n.useRef)(),a=Object(n.useRef)(),l=Object(n.useRef)();return c.a.createElement("div",{className:"contestFormMainDiv"},c.a.createElement("br",null),c.a.createElement("div",{className:" container contestDetailsDiv"},c.a.createElement("h3",{className:"form-title text-center"},"Contest Details"),c.a.createElement("hr",null),c.a.createElement("form",{className:"contestFormDiv"},c.a.createElement("div",{className:"form-group row justify-content-center contestFormInput"},c.a.createElement("label",{htmlFor:"title",className:"col-sm-2 col-form-label"},"Title"),c.a.createElement("div",{className:"col-sm-10 "},c.a.createElement("input",{type:"text",className:"form-control contestTextArea ",placeholder:"Contest Title",ref:e}))),c.a.createElement("div",{className:"form-group row contestFormInput"},c.a.createElement("label",{htmlFor:"description",className:"col-sm-2 col-form-label"},"Description"),c.a.createElement("div",{className:"col-sm-10 "},c.a.createElement("textarea",{className:"form-control contestTextArea",rows:"3",placeholder:"Tell us something about the contest",ref:t}))),c.a.createElement("div",{className:"form-group row contestFormInput"},c.a.createElement("label",{htmlFor:"description",className:"col-sm-2 col-form-label"},"Category"),c.a.createElement("div",{className:"col-sm-10 "},c.a.createElement("select",{className:"form-control contestTextArea",ref:a},["Portrait","Still Life","Landscape","Food","Wildlife","Macro","Event","Fashion","Newborn","Street","Sports","Documentary","Weather","Architectural"].map(function(e){return c.a.createElement("option",{key:e+"2"},e)})))),c.a.createElement("div",{className:"form-group row contestFormInput"},c.a.createElement("label",{htmlFor:"endDate",className:"col-sm-2 col-form-label"},"Due Date"),c.a.createElement("div",{className:"col-sm-10 "},c.a.createElement("input",{type:"date",className:"form-control contestTextArea",placeholder:"Tell us something about the contest",ref:l}))),c.a.createElement("div",{className:"row"},c.a.createElement("button",{className:"btn btn-default contestSaveButton",onClick:function(n){n.preventDefault(),g.createContestDetails({title:e.current.value,description:t.current.value,category:a.current.value,duedate:l.current.value,id:Ee()()}).then(function(e){console.log(e.data),window.location.href="/contests"}).catch(function(e){return console.log(e)})}},"Post Contest")))))};var ve=function(e){var t=e.location.state.imageUrl;return console.log("imageUrl "+t),c.a.createElement("div",{style:{backgroundColor:"#161618",height:"100vh"},className:"p-3"},"Image page",c.a.createElement("br",null),c.a.createElement(r.b,{to:{pathname:"/contests"},className:"float-right"},"Back to Contests"),c.a.createElement("br",null),c.a.createElement("img",{src:t,alt:""}))};var he=function(e){console.log("--- searched --- "),console.log(e.location.state.searchVal);var t=Object(n.useState)([]),a=Object(i.a)(t,2),l=a[0],o=a[1],r=Object(n.useState)({}),s=Object(i.a)(r,2),m=s[0],u=s[1],d=Object(n.useState)(!1),p=Object(i.a)(d,2),f=p[0],E=p[1];return Object(n.useEffect)(function(){console.log("Searched for "+e.location.state.searchVal),g.searchContests(e.location.state.searchVal).then(function(e){console.log(e.data),o(e.data)})},[e.location.state.searchVal]),c.a.createElement("div",{className:"bgCover"},c.a.createElement("div",{className:"container p-5"},!f&&c.a.createElement("div",{className:"jumbotron mt-5 p-5 mx-auto justify-content-center"},l.length?c.a.createElement(te,{contests:l,contestDetails:function(e){console.log(e),u(e),E(!0)},buttonLabel:"View"}):c.a.createElement("h3",null,"No Results have found")),f&&c.a.createElement(K,{backToContest:function(){E(!1)},contestData:m})))};var Ne=function(){return c.a.createElement(r.a,null,c.a.createElement("div",{className:"App"},c.a.createElement(b,null),c.a.createElement(s.b,{exact:!0,path:["/","/main"],component:k}),c.a.createElement(s.b,{exact:!0,path:"/login",component:U}),c.a.createElement(s.b,{exact:!0,path:"/signup",component:j}),c.a.createElement(s.b,{exact:!0,path:"/about",component:k}),c.a.createElement(s.b,{exact:!0,path:"/profile",component:L}),c.a.createElement(s.b,{exact:!0,path:"/personalAccount",component:ge}),c.a.createElement(s.b,{exact:!0,path:"/hostevents",component:be}),c.a.createElement(s.b,{exact:!0,path:"/contests",component:ae}),c.a.createElement(s.b,{exact:!0,path:"/image",component:ve}),c.a.createElement(s.b,{exact:!0,path:"/showcontest",component:K}),c.a.createElement(s.b,{exact:!0,path:"/search",component:he})))},je=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function ye(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}o.a.render(c.a.createElement(Ne,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("","/service-worker.js");je?function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):ye(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e):ye(e)})}}()},47:function(e,t,a){e.exports=a.p+"static/media/7.f15c30e0.jpg"},78:function(e,t,a){}},[[151,1,2]]]);
//# sourceMappingURL=main.ba471a29.chunk.js.map